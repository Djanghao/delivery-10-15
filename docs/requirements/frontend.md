# 审批管理系统爬取平台 - 前端设计文档

## 一、总体目标

* 提供一个管理平台界面，支持人工触发任务（多选地区 + 历史 / 增量模式）。
* 展示命中监管类型的项目（valuable_projects）。
* 支持结果导出。
* 使用 **antdesign** 组件库，保证一致的 UI 风格和较低实现成本。
* UI要美观, 参考twitter风格

---

## 二、技术栈

* **框架**：Next.js (App Router)
* **UI 组件库**：ant design
* **数据获取**：fetch 调用 FastAPI 接口

## 三, 组件设计
1. Ant design 的 Tree, 用来筛选地区(省级, 市级)
2. Ant design 的 Table, 用来展示爬取得到的项目列表
3. Ant design 的 Menu, 用来做sidebar, 在不同页之间切换
4. 一个展示爬取log的组件, 详细显示爬取的log过程
5. Ant design 的 button
6. Ant design 的 list 组件, 用来显示爬取的历史过程

# 四. 前端UI设计

Sidebar 固定在左侧，点击菜单项切换页面

页面1: 数据爬取页面

1. 使用Tree组件, 选取要爬取的地区(支持选择多个城市，选中城市时自动选中该城市下的所有区。支持单独选择某些区，不强制全选城市). 实现一个可复用的地区选择组件. 通过调用后端接口获取地区列表及其嵌套关系（见 docs/requirements/req-1.md 3.1）。
    - 默认加载时调用接口，填充 Tree 数据。
    - 父节点(市级)全选时自动选中子节点。
    - 子节点(区级)可单独选中，不强制父节点全选。
    - 勾选状态需要传递给后端接口（地区 ID 数组）。
2. 点击开始爬取 (有两种爬取方式, 历史 / 增量模式)
3. 显示爬取的日志, 比如爬到了什么几个事项, 筛选出了几个符合条件的项目
    - 可以点击清楚日志, 数据库中的日志也会被清除
    - 背景为深色, 文本颜色使用浅灰/绿色，类似终端打印效果。
    - 每条日志一行，自动换行。每条日志前加上时间戳（例如 [12:03:14]）。
    - 滚动容器（高度固定，超出时支持滚动）。新日志追加时自动滚动到底部。

页面2: 爬取结果展示
1. 可以通过之前做的可复用的地区选择组件, 
2. 选择之后, 点击筛选, 可以显示某个地区中的爬取到的列表
3. 每个 item 显示：爬取时间 / 模式（历史 / 增量）/ 地区数量 / 爬取的事项数量 / 筛选后的合格项目数量。